'use client';

import { useEffect, useRef } from 'react';
import { gsap } from 'gsap';

export function BlobMorph() {
  const blob1Ref = useRef<SVGPathElement>(null);
  const blob2Ref = useRef<SVGPathElement>(null);
  const blob3Ref = useRef<SVGPathElement>(null);

  useEffect(() => {
    const paths = [
      {
        ref: blob1Ref,
        morphs: [
          'M60,-65.5C75.9,-55.3,86.4,-35.6,88.7,-15.3C91,5,85.1,25.8,74.3,43.4C63.5,61,47.8,75.4,29.8,81.3C11.8,87.2,-8.5,84.6,-27.3,77.8C-46.1,71,-63.4,60,-73.8,44.4C-84.2,28.8,-87.7,8.6,-84.9,-10.3C-82.1,-29.2,-73,-46.8,-59.3,-57.6C-45.6,-68.4,-27.3,-72.4,-8.2,-72.1C10.9,-71.8,44.1,-75.7,60,-65.5Z',
          'M52.3,-63.8C67.4,-55.7,78.9,-38.9,82.7,-20.8C86.5,-2.7,82.6,16.7,74.5,33.5C66.4,50.3,54.1,64.5,38.5,72.1C22.9,79.7,3.9,80.7,-14.3,77.3C-32.5,73.9,-49.9,66.1,-62.5,53.7C-75.1,41.3,-82.9,24.3,-84.2,6.5C-85.5,-11.3,-80.3,-29.9,-69.8,-43.8C-59.3,-57.7,-43.5,-66.9,-27.4,-74.7C-11.3,-82.5,5.1,-89,20.8,-87.2C36.5,-85.4,37.2,-71.9,52.3,-63.8Z',
          'M47.8,-58.9C61.5,-48.3,71.5,-33.4,75.7,-16.7C79.9,0,78.3,18.5,70.3,33.9C62.3,49.3,47.9,61.6,31.7,69.5C15.5,77.4,-2.5,80.9,-19.4,77.5C-36.3,74.1,-52.1,63.8,-63.3,49.6C-74.5,35.4,-81.1,17.7,-80.8,0.2C-80.5,-17.3,-73.3,-34.6,-62.3,-48.5C-51.3,-62.4,-36.5,-73,-20.4,-77.8C-4.3,-82.6,13.1,-81.6,28.4,-75.3C34.1,-69.5,47.8,-58.9,47.8,-58.9Z'
        ]
      },
      {
        ref: blob2Ref,
        morphs: [
          'M44.7,-58.1C56.9,-50.2,65.1,-35.6,69.4,-19.8C73.7,-4,74.1,13,68.5,28.2C62.9,43.4,51.3,56.8,36.8,64.8C22.3,72.8,4.9,75.4,-12.1,73.5C-29.1,71.6,-45.7,65.2,-57.8,54.4C-69.9,43.6,-77.5,28.4,-78.8,12.5C-80.1,-3.4,-75.1,-19.9,-66.3,-33.8C-57.5,-47.7,-44.9,-59,-30.8,-66.3C-16.7,-73.6,-0.9,-77,14.4,-75.4C29.7,-73.8,32.5,-66,44.7,-58.1Z',
          'M51.2,-65.3C64.8,-56.5,73.7,-39.4,77.3,-21.3C80.9,-3.2,79.2,15.9,72.1,32.4C65,48.9,52.5,62.8,37.4,69.8C22.3,76.8,4.6,77,-12.3,74.2C-29.2,71.4,-45.3,65.6,-58.1,55.4C-70.9,45.2,-80.4,30.6,-82.7,14.9C-85,-0.8,-80.1,-17.6,-71.5,-31.9C-62.9,-46.2,-50.6,-58,-36.4,-66.4C-22.2,-74.8,-6.1,-79.8,9.3,-78.1C24.7,-76.4,37.6,-74.1,51.2,-65.3Z',
          'M39.8,-54.2C51.1,-45.6,59.3,-32.9,64.2,-18.7C69.1,-4.5,70.7,11.2,66.7,25.3C62.7,39.4,53.1,51.9,40.6,59.8C28.1,67.7,12.7,70.9,-3.1,70.2C-18.9,69.5,-35.2,64.9,-47.8,56.1C-60.4,47.3,-69.3,34.3,-73.1,19.8C-76.9,5.3,-75.6,-10.7,-69.5,-24.5C-63.4,-38.3,-52.5,-49.9,-39.9,-58.1C-27.3,-66.3,-13.6,-71.1,0.4,-70.8C14.4,-70.5,28.5,-62.8,39.8,-54.2Z'
        ]
      },
      {
        ref: blob3Ref,
        morphs: [
          'M42.1,-56.3C54.2,-47.5,63.5,-34.2,68.3,-19.2C73.1,-4.2,73.4,12.5,68.1,27.5C62.8,42.5,51.9,55.8,38.1,63.5C24.3,71.2,7.6,73.3,-8.8,71.2C-25.2,69.1,-41.3,62.8,-54.1,52.9C-66.9,43,-76.4,29.5,-78.8,14.8C-81.2,0.1,-76.5,-15.8,-68.2,-29.4C-59.9,-43,-48,-54.3,-34.6,-62.7C-21.2,-71.1,-6.3,-76.6,7.8,-75.8C21.9,-75,30,-66.1,42.1,-56.3Z',
          'M48.6,-63.5C61.5,-54.9,69.5,-38.7,73.4,-21.7C77.3,-4.7,77.1,13.1,71.3,28.6C65.5,44.1,54.1,57.3,40.1,65.1C26.1,72.9,9.5,75.3,-6.8,73.4C-23.1,71.5,-39.1,65.3,-51.5,55.4C-63.9,45.5,-72.7,32,-75.8,17.2C-78.9,2.4,-76.3,-13.7,-68.9,-27.3C-61.5,-40.9,-49.3,-52,-35.6,-60.2C-21.9,-68.4,-6.7,-73.7,8.2,-73.3C23.1,-72.9,35.7,-72.1,48.6,-63.5Z',
          'M55.3,-68.8C69.8,-59.5,78.9,-41.2,81.8,-22.3C84.7,-3.4,81.4,16.1,73.5,32.8C65.6,49.5,53.1,63.4,38.1,70.1C23.1,76.8,5.6,76.3,-11.3,73.7C-28.2,71.1,-44.5,66.4,-57.3,57.3C-70.1,48.2,-79.4,34.7,-81.3,20.1C-83.2,5.5,-77.7,-10.2,-69.8,-23.5C-61.9,-36.8,-51.6,-47.7,-39.2,-57.5C-26.8,-67.3,-12.2,-76,3.6,-77.8C19.4,-79.6,40.8,-78.1,55.3,-68.8Z'
        ]
      }
    ];

    paths.forEach(({ ref, morphs }) => {
      if (!ref.current) return;

      gsap.to(ref.current, {
        attr: { d: morphs[0] },
        duration: 4,
        repeat: -1,
        yoyo: true,
        ease: 'power1.inOut',
        repeatDelay: 0.5
      });

      gsap.to(ref.current, {
        attr: { d: morphs[1] },
        duration: 5,
        delay: 1,
        repeat: -1,
        yoyo: true,
        ease: 'sine.inOut',
        repeatDelay: 0.3
      });
    });
  }, []);

  return (
    <div className="fixed inset-0 -z-10 overflow-hidden">
      <svg
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute -top-20 -left-20 w-96 h-96 opacity-30"
      >
        <defs>
          <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#a78bfa" stopOpacity="0.6" />
            <stop offset="100%" stopColor="#ec4899" stopOpacity="0.6" />
          </linearGradient>
        </defs>
        <path
          ref={blob1Ref}
          d="M60,-65.5C75.9,-55.3,86.4,-35.6,88.7,-15.3C91,5,85.1,25.8,74.3,43.4C63.5,61,47.8,75.4,29.8,81.3C11.8,87.2,-8.5,84.6,-27.3,77.8C-46.1,71,-63.4,60,-73.8,44.4C-84.2,28.8,-87.7,8.6,-84.9,-10.3C-82.1,-29.2,-73,-46.8,-59.3,-57.6C-45.6,-68.4,-27.3,-72.4,-8.2,-72.1C10.9,-71.8,44.1,-75.7,60,-65.5Z"
          transform="translate(100 100)"
          fill="url(#grad1)"
        />
      </svg>

      <svg
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute top-1/4 right-10 w-80 h-80 opacity-25"
      >
        <defs>
          <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#3b82f6" stopOpacity="0.6" />
            <stop offset="100%" stopColor="#8b5cf6" stopOpacity="0.6" />
          </linearGradient>
        </defs>
        <path
          ref={blob2Ref}
          d="M44.7,-58.1C56.9,-50.2,65.1,-35.6,69.4,-19.8C73.7,-4,74.1,13,68.5,28.2C62.9,43.4,51.3,56.8,36.8,64.8C22.3,72.8,4.9,75.4,-12.1,73.5C-29.1,71.6,-45.7,65.2,-57.8,54.4C-69.9,43.6,-77.5,28.4,-78.8,12.5C-80.1,-3.4,-75.1,-19.9,-66.3,-33.8C-57.5,-47.7,-44.9,-59,-30.8,-66.3C-16.7,-73.6,-0.9,-77,14.4,-75.4C29.7,-73.8,32.5,-66,44.7,-58.1Z"
          transform="translate(100 100)"
          fill="url(#grad2)"
        />
      </svg>

      <svg
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
        className="absolute bottom-10 left-1/3 w-96 h-96 opacity-20"
      >
        <defs>
          <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#06b6d4" stopOpacity="0.6" />
            <stop offset="100%" stopColor="#10b981" stopOpacity="0.6" />
          </linearGradient>
        </defs>
        <path
          ref={blob3Ref}
          d="M42.1,-56.3C54.2,-47.5,63.5,-34.2,68.3,-19.2C73.1,-4.2,73.4,12.5,68.1,27.5C62.8,42.5,51.9,55.8,38.1,63.5C24.3,71.2,7.6,73.3,-8.8,71.2C-25.2,69.1,-41.3,62.8,-54.1,52.9C-66.9,43,-76.4,29.5,-78.8,14.8C-81.2,0.1,-76.5,-15.8,-68.2,-29.4C-59.9,-43,-48,-54.3,-34.6,-62.7C-21.2,-71.1,-6.3,-76.6,7.8,-75.8C21.9,-75,30,-66.1,42.1,-56.3Z"
          transform="translate(100 100)"
          fill="url(#grad3)"
        />
      </svg>
    </div>
  );
}
